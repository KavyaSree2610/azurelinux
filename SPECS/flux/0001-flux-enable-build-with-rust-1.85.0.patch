From 4f5642051784a226f504b5fa5fae2d86b4660328 Mon Sep 17 00:00:00 2001
From: Muhammad Falak R Wani <falakreyaz@gmail.com>
Date: Wed, 5 Mar 2025 13:10:58 +0530
Subject: [PATCH] flux: enable build with rust 1.85.0

Signed-off-by: Muhammad Falak R Wani <falakreyaz@gmail.com>
---
 libflux/flux-core/src/ast/walk/mod.rs   | 2 +-
 libflux/flux-core/src/parser/mod.rs     | 2 +-
 libflux/flux-core/src/semantic/types.rs | 1 +
 3 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/libflux/flux-core/src/ast/walk/mod.rs b/libflux/flux-core/src/ast/walk/mod.rs
index 90f70ba..a696682 100644
--- a/libflux/flux-core/src/ast/walk/mod.rs
+++ b/libflux/flux-core/src/ast/walk/mod.rs
@@ -180,7 +180,7 @@ impl<'a> Node<'a> {
 
 impl<'a> Node<'a> {
     #[allow(missing_docs)]
-    pub fn from_expr(expr: &'a Expression) -> Node {
+    pub fn from_expr(expr: &'a Expression) -> Node<'a> {
         match expr {
             Expression::Identifier(e) => Node::Identifier(e),
             Expression::Array(e) => Node::ArrayExpr(e),
diff --git a/libflux/flux-core/src/parser/mod.rs b/libflux/flux-core/src/parser/mod.rs
index ac7d4b9..561c3a0 100644
--- a/libflux/flux-core/src/parser/mod.rs
+++ b/libflux/flux-core/src/parser/mod.rs
@@ -41,7 +41,7 @@ pub struct Parser<'input> {
 
 impl<'input> Parser<'input> {
     /// Instantiates a new parser with the given string as input.
-    pub fn new(src: &'input str) -> Parser {
+    pub fn new(src: &'input str) -> Parser<'input> {
         let s = Scanner::new(src);
         Parser {
             s,
diff --git a/libflux/flux-core/src/semantic/types.rs b/libflux/flux-core/src/semantic/types.rs
index 8c5efb7..402d046 100644
--- a/libflux/flux-core/src/semantic/types.rs
+++ b/libflux/flux-core/src/semantic/types.rs
@@ -2186,6 +2186,7 @@ impl Function {
     }
 }
 
+#[allow(dead_code)]
 pub(crate) trait TypeLike {
     type Error;
     fn typ(&self) -> &MonoType;
-- 
2.48.1
