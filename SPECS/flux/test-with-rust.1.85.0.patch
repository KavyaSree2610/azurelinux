From 0100fbb3789ab43b865df099094156ad120b6bca Mon Sep 17 00:00:00 2001
From: Kavya Sree Kaitepalli <kkaitepalli@microsoft.com>
Date: Wed, 5 Mar 2025 11:12:00 +0000
Subject: [PATCH] Test with rust 1.85

---
 libflux/flux-core/src/lib.rs | 2 +-
 libflux/flux/src/cffi.rs     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/libflux/flux-core/src/lib.rs b/libflux/flux-core/src/lib.rs
index 733c5cb..5cd0292 100644
--- a/libflux/flux-core/src/lib.rs
+++ b/libflux/flux-core/src/lib.rs
@@ -1,4 +1,4 @@
-#![cfg_attr(feature = "strict", deny(warnings, missing_docs))]
+#![cfg_attr(feature = "strict", warn(missing_docs))]
 #![allow(
     clippy::needless_update, //
     clippy::identity_op, // Warns on `1 * YEARS` which seems clearer than `YEARS`
diff --git a/libflux/flux/src/cffi.rs b/libflux/flux/src/cffi.rs
index ba18e3d..846a880 100644
--- a/libflux/flux/src/cffi.rs
+++ b/libflux/flux/src/cffi.rs
@@ -1159,7 +1159,7 @@ from(bucket: v.bucket)
         // Safety: both parameters are valid
         let err = unsafe { flux_ast_get_error(pkg, options) }.unwrap();
         // Safety: pkg is a valid pointer allocated just above
-        unsafe { Box::from_raw(pkg) }; // Free the AST
+       unsafe { let _ = Box::from_raw(pkg); }; // Free the AST
         let msg = err.message.to_string_lossy();
         assert!(
             msg.contains("incomplete utf-8 byte sequence from index 0"),
--
2.45.3
